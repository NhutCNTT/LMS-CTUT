<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Báo cáo độc giả — Thư viện CTUT</title>

    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"/>

    <!-- CSS dự án từ /static -->
    <link rel="stylesheet" th:href="@{/css/librarian/header.css}" />
    <link rel="stylesheet" th:href="@{/css/librarian/sidebar.css}" />
    <link rel="stylesheet" th:href="@{/css/librarian/layout.css}" />

</head>
<body>
<!-- Header fragment -->
<div th:replace="components/librarian/header :: header"></div>

<div class="app-layout d-flex" style="min-height: 100vh">
    <!-- Sidebar fragment (kích hoạt nhóm reports/member) -->
    <aside th:replace="components/librarian/sidebar :: sidebar('reports-member')"></aside>

    <main class="flex-grow-1">
        <section id="doc-gia" class="content-section">
            <div class="container py-4">
                <h2 class="h3 fw-bold mb-3">Báo cáo độc giả</h2>

                <div class="row g-4">
                    <div class="col-lg-6">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title mb-3">Tăng trưởng độc giả mới</h5>
                                <div class="chart-container" style="height: 300px">
                                    <canvas id="docGiaGrowthChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title mb-3">Top độc giả tích cực (tháng)</h5>
                                <div class="table-responsive">
                                    <table class="table table-modern mb-0">
                                        <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Tên độc giả</th>
                                            <th>Số sách mượn</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr><td>1</td><td>Lê Minh Tuấn</td><td>15</td></tr>
                                        <tr><td>2</td><td>Hoàng Thu Trang</td><td>12</td></tr>
                                        <tr><td>3</td><td>Vũ Đức Anh</td><td>11</td></tr>
                                        <tr><td>4</td><td>Đặng Thị Mai</td><td>10</td></tr>
                                        <tr><td>5</td><td>Ngô Gia Bảo</td><td>9</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                </div> <!-- /.row -->
            </div> <!-- /.container -->
        </section>
    </main>
</div>

<!-- Bootstrap JS + Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script defer th:src="@{/js/librarian/header.js}"></script>
<script defer th:src="@{/js/librarian/sidebar.js}"></script>
<script defer th:src="@{/js/librarian/inject-layout.js}"></script>

<!-- Khởi tạo biểu đồ -->
<script>
    (function () {
        const el = document.getElementById("docGiaGrowthChart");
        if (!el) return;
        new Chart(el.getContext("2d"), {
            type: "bar",
            data: {
                labels: ["Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10"],
                datasets: [{
                    label: "Độc giả mới",
                    data: [50, 65, 72, 80, 110, 125],
                    backgroundColor: "#0ea5e9"
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { position: "bottom" } },
                scales: { y: { beginAtZero: true } }
            }
        });
    })();
</script>
</body>
</html>
